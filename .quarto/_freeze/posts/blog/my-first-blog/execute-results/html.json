{
  "hash": "3fe59a9580cffa9590e06973b61b3a2c",
  "result": {
    "markdown": "---\ntitle: 'My first blog post'\ndate: '2022-06-01'\ncategories: ['My first blog', 'geo-spatial']\ndescription: 'Where are the ACT speed camera hotspots?'\nexecute: \n  message: false\n  warning: false\neditor_options: \n  chunk_output_type: console\n---\n\n\n# Heading 1\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Nam suscipit est nec dui\n\n## Merriweather\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Nam suscipit est nec dui\n\n### Loading in libraries and data\n\nData from this website: Mobile Speed Camera Visits and Stays \\| Open Data Portal (act.gov.au)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(leaflet)\nlibrary(tidygeocoder)\nlibrary(glue)\nlibrary(httr)\nlibrary(jsonlite)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbase_url <-  \"https://www.data.act.gov.au/resource/d56a-2nhi.json?\"\nfull_url <-  glue(base_url, '$limit=100000' )\nresponse <-  GET(full_url)\n\ndata_raw <-  fromJSON(rawToChar(response$content)) %>% \n  as_tibble() %>% type_convert()\n  \nglimpse(data_raw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 67,030\nColumns: 9\n$ date                <dttm> 2023-04-12, 2023-04-18, 2023-04-20, 2023-04-12, 2…\n$ timeatsiteinhours   <dbl> 1.57, 1.42, 1.58, 1.52, 1.58, 1.83, 1.13, 1.33, 0.…\n$ description_of_site <chr> \"Barron Street/Stonehaven Crescent\", \"Belconnen Wa…\n$ camera_location     <chr> \"0288A\", \"0098E\", \"0052B\", \"0052C\", \"0105A\", \"0105…\n$ street              <chr> \"Strickland Crescent\", \"Haydon Drive\", \"Novar Stre…\n$ number_checked      <dbl> 438, 412, 214, 176, 380, 359, 776, 656, 55, 309, 1…\n$ highest_speed       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ average_speed       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ posted_speed        <dbl> 50, 80, 60, 60, 50, 50, 60, 50, 60, 60, 50, 50, 50…\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# https://jenslaufer.com/data/analysis/visualize_missing_values_with_ggplot.html\nmissing_values <- data_raw %>%\n  gather(key = \"key\", value = \"val\") %>%\n  mutate(isna = is.na(val)) %>%\n  group_by(key) %>%\n  mutate(total = n()) %>%\n  group_by(key, total, isna) %>%\n  summarise(num.isna = n()) %>%\n  mutate(pct = round(num.isna / total * 100, 2))\n\nlevels <- (missing_values  %>% filter(isna == T) %>% arrange(desc(pct)))$key\n\npercentage_plot <- missing_values %>%\n  ggplot() +\n  \n    geom_bar(aes(x = reorder(key, desc(pct)), y = pct, fill=isna), \n             stat = 'identity', \n             alpha=0.8) +\n  \n    geom_text(aes(x = reorder(key, desc(pct)) , \n                  y = 50, \n                  label = ifelse(isna == TRUE, glue(\"{pct}% are missing\\nThat's {num.isna} out of {total}\"), \"\"))) + \n  \n      scale_x_discrete(limits = levels) +\n      scale_fill_manual(name = \"\", \n                        values = c('steelblue', 'tomato3'), \n                        labels = c(\"Present\", \"Missing\")) +\n      coord_flip() +\n      labs(title = \"Percentage of missing values\", \n           x ='Variable', \n           y = \"% of missing values\")\n\npercentage_plot\n```\n\n::: {.cell-output-display}\n![](my-first-blog_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data_raw %>% drop_na()\nprint(glue(\"Raw data rows: {nrow(data_raw)}\\nClean data rows: {nrow(data)}\\n Lost rows: {nrow(data_raw)-nrow(data)}\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRaw data rows: 67030\nClean data rows: 66969\n Lost rows: 61\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#https://jessecambon.github.io/tidygeocoder/\n\nglimpse(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 66,969\nColumns: 9\n$ date                <dttm> 2023-04-12, 2023-04-18, 2023-04-20, 2023-04-12, 2…\n$ timeatsiteinhours   <dbl> 1.57, 1.42, 1.58, 1.52, 1.58, 1.83, 1.13, 1.33, 0.…\n$ description_of_site <chr> \"Barron Street/Stonehaven Crescent\", \"Belconnen Wa…\n$ camera_location     <chr> \"0288A\", \"0098E\", \"0052B\", \"0052C\", \"0105A\", \"0105…\n$ street              <chr> \"Strickland Crescent\", \"Haydon Drive\", \"Novar Stre…\n$ number_checked      <dbl> 438, 412, 214, 176, 380, 359, 776, 656, 55, 309, 1…\n$ highest_speed       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ average_speed       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ posted_speed        <dbl> 50, 80, 60, 60, 50, 50, 60, 50, 60, 60, 50, 50, 50…\n```\n:::\n\n```{.r .cell-code}\n# \n# lat_longs <- data %>%\n#   geocode(addr, method = 'osm', lat = latitude , long = longitude)\n```\n:::\n",
    "supporting": [
      "my-first-blog_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}